<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="spring.project.autumn.mapper.DataMapper">
	<insert id="setIonoData">
		insert into ${station} (`year`, `doy`, `month`, `day`, `hh`, `mm`, foF2, foEs, hmF2, hpEs) 
		values (#{year}, #{doy}, #{month}, #{day}, #{hh}, #{mm}, #{foF2}, #{foEs}, #{hmF2}, #{hpEs})
	</insert>
	
	<insert id="setSaoList">
		insert into files (station, `year`, `doy`, `fileName`) 
		values (#{station}, #{year}, #{doy}, #{fileName})
	</insert>
	
	<select id="tableCount" resultType="Integer">
		select count(*) from ${tableName}
	</select>
	
	<select id="getSaoInfo" resultType="FileVO">
		select station, `year`, `doy`, `fileName`, setTime from files where station = #{tableName} order by `no` desc limit 1
	</select>
	
	<select id="getStations" resultType="hashmap">
		select * from stations
	</select>
	
	<select id="avgF2" resultType="hashmap">
		select `${column}`, round(avg(${target_1}),2) as foF2, round(avg(${target_2})) as hmF2 from ${tableName}_copy where ${target_1} != 9999 and ${target_2} != 9999 group by ${group_1}
	</select>
	
</mapper>